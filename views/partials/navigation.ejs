<div class="header-content">
    <a href="/" class="logo">Snap Cart<span>TRADE & GROW</span></a>

    <button class="hamburger">
        <i class="fas fa-bars"></i>
    </button>

    <nav>
        <ul>
            <li><a href="/" class="<%= currentPage === 'home' ? 'active' : '' %>">Home</a></li>
            <li><a href="/products" class="<%= currentPage === 'products' ? 'active' : '' %>">Products</a></li>
            <li><a href="/feed" class="<%= currentPage === 'feed' ? 'active' : '' %>">Feed</a></li>
            <li><a href="/about" class="<%= currentPage === 'about' ? 'active' : '' %>">About</a></li>
            <% if (user) { %>
                <li class="user-dropdown">
                    <div class="user-info" onclick="toggleUserDropdown()">
                        <span class="user-name"><%= user.name %></span>
                        <% if (user.verified) { %>
                            <span class="verified-badge" title="Verified User">
                                <i class="fas fa-check-circle"></i>
                            </span>
                        <% } %>
                        <i class="fas fa-chevron-down dropdown-arrow"></i>
                    </div>
                    <div class="user-dropdown-menu" id="userDropdown">
                        <a href="/dashboard" class="<%= currentPage === 'dashboard' ? 'active' : '' %>">
                            <i class="fas fa-tachometer-alt"></i> Dashboard
                        </a>
                        <% if (user.role === 'admin') { %>
                            <a href="/admin/applications" class="<%= currentPage === 'admin-applications' ? 'active' : '' %>">
                                <i class="fas fa-clipboard-list"></i> Seller Applications
                            </a>
                        <% } %>
                        <a href="/sell" class="<%= currentPage === 'sell' ? 'active' : '' %>">
                            <i class="fas fa-plus"></i> Sell Product
                        </a>
                        <div class="dropdown-divider"></div>
                        <form action="/logout" method="POST" id="logout-form">
                            <button type="submit" class="logout-btn">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </button>
                        </form>
                    </div>
                </li>
            <% } else { %>
                <li><a href="/login" class="<%= currentPage === 'login' ? 'active' : '' %>">Login</a></li>
                <li><a href="/register" class="<%= currentPage === 'register' ? 'active' : '' %>">Register</a></li>
            <% } %>
        </ul>
    </nav>
</div>

<!-- Verification Popup -->
<% if (user && user.verified) { %>
<div id="verification-popup" class="verification-popup">
    <div class="verification-popup-content">
        <div class="verification-icon">
            <i class="fas fa-check-circle"></i>
        </div>
        <h3>Congratulations!</h3>
        <p>You have been verified as a trusted seller on Snap Cart. Your products will now be featured on the home page!</p>
        <button id="close-verification-popup" class="btn-popup">Got it!</button>
    </div>
</div>

<script>
// Show verification popup only once
document.addEventListener('DOMContentLoaded', function() {
    if (!localStorage.getItem('verificationPopupShown')) {
        const popup = document.getElementById('verification-popup');
        if (popup) {
            popup.style.display = 'flex';
            localStorage.setItem('verificationPopupShown', 'true');
        }
    }

    // Close popup functionality
    const closeBtn = document.getElementById('close-verification-popup');
    if (closeBtn) {
        closeBtn.addEventListener('click', function() {
            const popup = document.getElementById('verification-popup');
            if (popup) {
                popup.style.display = 'none';
            }
        });
    }

    // Close popup when clicking outside
    const popup = document.getElementById('verification-popup');
    if (popup) {
        popup.addEventListener('click', function(e) {
            if (e.target === this) {
                this.style.display = 'none';
            }
        });
    }
});
</script>
<% } %>

<style>
.verification-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    animation: fadeIn 0.5s ease-in-out;
}

.verification-popup-content {
    background-color: white;
    padding: 40px;
    border-radius: 15px;
    max-width: 400px;
    width: 90%;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.verification-icon {
    font-size: 64px;
    color: #28a745;
    margin-bottom: 20px;
}

.verification-popup h3 {
    color: #28a745;
    margin-bottom: 15px;
    font-size: 24px;
}

.verification-popup p {
    color: #666;
    margin-bottom: 25px;
    line-height: 1.6;
}

.btn-popup {
    background-color: #28a745;
    color: white;
    border: none;
    padding: 12px 30px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 16px;
    font-weight: 500;
    transition: background-color 0.3s;
}

.btn-popup:hover {
    background-color: #218838;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@media (max-width: 768px) {
    .verification-popup-content {
        padding: 30px 20px;
        margin: 20px;
    }
}
</style>